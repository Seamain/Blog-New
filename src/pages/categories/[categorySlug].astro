---
import {
  createFullListOfCategorySlugWithId,
  getCategory,
} from "../../api/Category";
import type Category from "../../interfaces/Category";

interface SlugWithCategory {
  slug: string;
  category: Category;
}

interface Props {
  category: Category;
}

export async function getStaticPaths() {
  const result: SlugWithCategory[] = [];
  const fullListOfSlug = await createFullListOfCategorySlugWithId();

  for (const postAttr of fullListOfSlug) {
    const category = await getCategory(postAttr.id);

    result.push({
      slug: postAttr.slug,
      category,
    });
  }

  return result.map((postAttr) => {
    return {
      params: {
        categorySlug: postAttr.slug,
      },
      props: {
        post: postAttr.category,
      },
    };
  });
}
---
